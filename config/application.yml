<% host_url = ENV['HOST_URL'].presence || ENV['HEROKU_APP_NAME'] && "https://#{ENV['HEROKU_APP_NAME']}.herokuapp.com/" || 'http://localhost:3000/' %>
<% app_name = ENV['APP_NAME'].presence || 'BentOS' %>

default: &default
  # The application name which will be used in titles and e-mails.
  app_name: <%= app_name %>

  # A short application slogan which will show at places such as footer or
  # link descriptions.
  app_slogan: <%= ENV['APP_SLOGAN'].presence || '<strong>BentOS</strong>, the <strong>Bent</strong>o <strong>O</strong>peration <strong>S</strong>ystem' %>

  # The public URL, hostname and port of the application.
  url: <%= uri = URI.parse(host_url); uri.path = ''; uri %>
  host: <%= URI.parse(host_url).host %>
  port: <%= URI.parse(host_url).port %>

  # Used as the base secret in the application, including all MessageVerifiers
  # in Rails, such as the one protecting cookies.
  secret_key: <%= ENV['SECRET_KEY'].presence || SecureRandom.hex(64) %>

  user_center:
    # The e-mail sender address which will be used for user authentication
    # or profile related emails, such as Devise::Mailer.
    mailer_sender: <%= ENV['USER_CENTER_MAILER_SENDER'].presence || "#{app_name} <user_center@#{URI.parse(host_url).host}>" %>

    # User authentication OAuth provider configurations.
    oauth:
      # Google OAuth.
      # Redirect URI: "[host_url]/users/auth/google_oauth2/callback".
      google:
        enable: <%= ENV['OAUTH_GOOGLE_CLIENT_ID'].present? && ENV['OAUTH_GOOGLE_CLIENT_SECRET'].present? %>
        client_id: <%= ENV['OAUTH_GOOGLE_CLIENT_ID'] %>
        client_secret: <%= ENV['OAUTH_GOOGLE_CLIENT_SECRET'] %>
        display_name: <%= ENV['OAUTH_GOOGLE_DISPLAY_NAME'].presence || 'Google' %>

development:
  <<: *default

production:
  <<: *default

test:
  <<: *default
